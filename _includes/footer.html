    <footer class="container">

      {% include footer-ad.html %}

        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    Â© {{ site.since }}
                    <span title="{{ site.author}}">{{ site.author }}</span>
                    <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:window.scrollTo(0,0)" >TOP</a>
                </li>
            </ul>
            <a href="{{ site.github.repository_url }}" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                {% for nav in site.navs %}
                <li>
                    <a href="{{ site.url }}{{ nav.href }}" title="{{ nav.label }}" target="{{ nav.target | default: _self }}">{{ nav.label }}</a>
                </li>
                {% endfor %}
                <li><a href="{{ site.url }}{{ site.subscribe_rss }}"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

          {% include visit-stat.html %}

        </div>
    </footer>
    <div class="tools-wrapper">
      <a class="gotop" href="#" title="å›åˆ°é¡¶éƒ¨"><span class="octicon octicon-arrow-up"></span></a>
    </div>
    <!-- / footer -->
    {% if site.components.share.enabled %}
    <script src="{{ assets_base_url }}/assets/vendor/share.js/dist/js/share.min.js"></script>
    {% endif %}
    <script src="{{ assets_base_url }}/assets/js/geopattern.js"></script>
    <script>
      jQuery(document).ready(function($) {
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       /* hljs.initHighlightingOnLoad(); */
      });
    </script>

    {% if site.components.fancybox.enabled %}
    <script src="https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
    <script>
      $(document).ready(function() {
        $("p img").each(function() {
          var strA = "<a href='" + this.src + "' itemscope=\"\" itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\" data-fancybox=\"default\" rel=\"default\"></a>";
          $(this).wrapAll(strA);
        });
      });
    </script>
    {% endif %}

    {% if page.mermaid %}
    <script type="module">
      import mermaid from 'https://fastly.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: false });
      await mermaid.run({
        nodes: document.querySelectorAll('pre code.language-mermaid'),
      });
    </script>
    <script type="text/javascript">
  (function(){
    $("pre code.language-mermaid").each(function(index, element) {
      var preBlock = element.parentNode;
      element.style.backgroundColor = 'initial';
      preBlock.style.border = 'none';
      preBlock.style.backgroundColor = 'initial';
    });
  })()
    </script>
    {% endif %}

    {% if page.sequence %}
    <script src="{{ assets_base_url }}/assets/js/webfont.js"></script>
    <script src="{{ assets_base_url }}/assets/js/snap.svg-min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/underscore@1.13.1/underscore-umd-min.js"></script>
    <script src="{{ assets_base_url }}/assets/vendor/js-sequence-diagrams/dist/sequence-diagram-min.js"></script>
    <link rel="stylesheet" href="{{ assets_base_url }}/assets/vendor/js-sequence-diagrams/dist/sequence-diagram-min.css">
    <script>
      $(".language-sequence").sequenceDiagram({theme: 'simple'});
    </script>
    {% endif %}

    {% if page.flow %}
    <script src="{{ assets_base_url }}/assets/js/raphael.min.js"></script>
    <script src="{{ assets_base_url }}/assets/vendor/flowchart.js/dist/flowchart.min.js"></script>
    <script src="{{ assets_base_url }}/assets/js/flow.js"></script>
    {% endif %}

    {% if page.mathjax %}
    <script type="text/javascript" src="https://fastly.jsdelivr.net/gh/mathjax/MathJax@2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    {% endif %}

    {% if page.mindmap %}
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/mzlogin/kityminder-core@dev/dist/kityminder.core.css">
    <script type="text/javascript" src="https://fastly.jsdelivr.net/gh/mzlogin/kity@dev/dist/kity.min.js"></script>
    <script type="text/javascript" src="https://fastly.jsdelivr.net/gh/mzlogin/kityminder-core@dev/dist/kityminder.core.min.js"></script>
    <script>
$(document).ready(function(){
  $('.language-mindmap').each(function(index, element) {
    var markdownText = element.textContent.trim();
    var parentNode = element.parentNode.parentNode;
    var nodeName = '.language-mindmap-' + index;
    var node = document.createElement("div");
    node.className = 'language-mindmap-' + index;
    node.style.height = '' + $(element).height() + 'px';
    parentNode.insertBefore(node, element.parentNode);
    var minder = new kityminder.Minder({
      renderTo: nodeName
    });
    minder.importData('markdown', markdownText);
    /* minder.disable(); */
    minder.execCommand('hand');

    var viewerTipNode = document.createElement("a");
    viewerTipNode.setAttribute('href', '{{ site.url }}/mindmap-viewer/?data=' + encodeURIComponent(markdownText));
    viewerTipNode.setAttribute('target', '_blank');
    viewerTipNode.setAttribute('style', 'font-size:0.8rem;font-style:italic;font-color:grey;');
    viewerTipNode.innerText = 'å…¨å±æŸ¥çœ‹';
    parentNode.insertBefore(viewerTipNode, element.parentNode);

    element.parentNode.style.display = 'none';

    {% if page.mindmap-template %}
    setTimeout(function() {
      minder.setTemplate('{{ page.mindmap-template }}');
      minder.refresh();
    }, 100);
    {% endif %}
  });
});
    </script>
    {% endif %}
{% if page.mindmap2 %}
    <script src="https://fastly.jsdelivr.net/npm/d3@6"></script>
    <script src="https://fastly.jsdelivr.net/npm/markmap-view"></script>
    <script src="https://fastly.jsdelivr.net/npm/markmap-autoloader@0.1.2/dist/index.min.js"></script>
    <style>
        .markmap > svg {
          width: 100%;
          height: 100%;
          background: rgba(255, 255, 255, 0.9);
        }
    </style>
    <script>
        function fullScreen(nodeId) {
            var element= document.getElementById(nodeId);  
            if (window.ActiveXObject) {
                var WsShell = new ActiveXObject('WScript.Shell');
                WsShell.SendKeys('{F11}');
            }
            else if (element.requestFullScreen) {
                element.requestFullScreen();
            }
            else if (element.msRequestFullscreen) {
                element.msRequestFullscreen();
            }
            else if (element.webkitRequestFullScreen) {
                element.webkitRequestFullScreen();
            }
            else if (element.mozRequestFullScreen) {
                element.mozRequestFullScreen();
            }
        }

        function fullExit() {
            var element= document.getElementById("ddd");  
            if (window.ActiveXObject) {
                var WsShell = new ActiveXObject('WScript.Shell');
                WsShell.SendKeys('{F11}');
            }
            else if (element.requestFullScreen) {
                document.exitFullscreen();
            }
            else if (element.msRequestFullscreen) {
                document.msExitFullscreen();
            }
            else if (element.webkitRequestFullScreen) {
                document.webkitCancelFullScreen();
            }
            else if (element.mozRequestFullScreen) {
                document.mozCancelFullScreen();
            }
        }

        function insertAfter(newElement, targetElement) {
            var parent = targetElement.parentNode;
            if (parent.lastChild == targetElement) {
                parent.appendChild(targetElement);
            } else {
                parent.insertBefore(newElement, targetElement.nextSibling);
            }
        }
       
        $(document).ready(function(){
            $('.language-mindmap').each(function(index, element) {
                window.markmap = {
                    autoLoader: { manual: false },
                };
                var markdownText = element.textContent.trim();
                var parentNode = element.parentNode.parentNode;
                element.setAttribute('class', "markmap");
                var nodeName = '.language-mindmap-' + index;
                element.setAttribute("id", nodeName);
                var viewerTipNode1 = document.createElement("a");
                viewerTipNode1.appendChild(document.createTextNode("å…¨å±"));
                viewerTipNode1.setAttribute('onclick', 'fullScreen("' + nodeName + '")');
                viewerTipNode1.setAttribute('style', 'font-size:0.8rem;font-style:italic;font-color:grey;');
                viewerTipNode1.setAttribute('href', 'javascript:void(0)');
                insertAfter(viewerTipNode1, element.parentNode);
                var viewerTipNode2 = document.createElement("a");
                viewerTipNode2.appendChild(document.createTextNode("è¯­æ³•æç¤º"));
                viewerTipNode2.setAttribute('href', 'https://markmap.js.org/');
                viewerTipNode2.setAttribute('target', '_blank');
                viewerTipNode2.setAttribute('style', 'font-size:0.8rem;font-style:italic;font-color:grey;padding-left:0.5rem;');
                insertAfter(viewerTipNode2, viewerTipNode1);
            });
        });
    </script>      
{% endif %}

<!-- é…ç½® Live2D çœ‹æ¿å¨˜æ¨¡å‹ï¼ˆå¿…é¡»æ”¾åœ¨ autoload.js ä¹‹å‰ï¼‰ -->
<script>
window.live2d_widgets = {
  // æ¨¡å‹è·¯å¾„ï¼ˆæ ¹æ®ä»“åº“ç»“æ„è°ƒæ•´ï¼Œå‡è®¾â€œæ¥æºâ€å¯¹åº”â€œmodelsâ€ç›®å½•ï¼‰
  modelPath: "https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0-rc.6/models/neko/", 
// è§£é‡Šï¼š  
// - "https://fastly.jsdelivr.net/"ï¼šJSDelivr CDNï¼ŒåŠ é€Ÿæ¨¡å‹åŠ è½½ï¼›  
// - "npm/live2d-widgets@1.0.0-rc.6"ï¼šæŒ‡å®šåº“çš„ç‰ˆæœ¬ï¼ˆé¿å…æ›´æ–°å¯¼è‡´é—®é¢˜ï¼‰ï¼›  
// - "models/neko/"ï¼šæ¨¡å‹æ–‡ä»¶çš„å®é™…ç›®å½•ï¼ˆnekoæ˜¯çŒ«å¨˜æ¨¡å‹ï¼Œæ²¡é”™ï¼ï¼‰ã€‚
  // æ˜¾ç¤ºé…ç½®ï¼ˆè°ƒæ•´ä½ç½®å’Œå¤§å°ï¼Œé€‚é…ä½ çš„åšå®¢ï¼‰
  display: {
  position: "fixed",      // â‘  å›ºå®šåœ¨å±å¹•è§†å£ï¼ˆå…³é”®ï¼åªæœ‰å›ºå®šæ‰èƒ½ç”¨right/bottomï¼‰ï¼›  
  right: 15,              // â‘¡ è·ç¦»å³è¾¹15pxï¼ˆä¸è´´è¾¹ï¼Œæ›´å¯çˆ±ï¼‰ï¼›  
  bottom: 25,             // â‘¢ è·ç¦»åº•éƒ¨25pxï¼ˆåˆšå¥½åœ¨å³ä¸‹è§’ï¼Œä¸æŒ¡å¯¼èˆªï¼‰ï¼›  
  left: "auto",           // â‘£ å–æ¶ˆå·¦è¾¹çš„å›ºå®šï¼ˆé¿å…å’Œrightå†²çªï¼Œå¿…é¡»å†™ï¼ï¼‰ï¼›  
  width: 160,             // â‘¤ çœ‹æ¿å¨˜å®½åº¦ï¼ˆ160pxåˆšå¥½ï¼Œä¸å å¤ªå¤šç©ºé—´ï¼‰ï¼›  
  height: 320,            // â‘¥ çœ‹æ¿å¨˜é«˜åº¦ï¼ˆ320pxï¼Œæ¯”ä¾‹åè°ƒï¼‰ï¼›  
  zIndex: 999999,         // â‘¦ å±‚çº§æ‹‰åˆ°æœ€é«˜ï¼ˆ999999ï¼‰ï¼Œä¸ä¼šè¢«ä»»ä½•å…ƒç´ ï¼ˆæ¯”å¦‚å¯¼èˆªã€å¡ç‰‡ï¼‰æŒ¡ä½ï¼›  
  transform: "none",      // â‘§ å–æ¶ˆé»˜è®¤çš„ç¼©æ”¾/å¹³ç§»ï¼ˆé¿å…ä½ç½®åç§»ï¼‰ï¼›  
},
  // ç§»åŠ¨ç«¯é€‚é…ï¼ˆç¡®ä¿æ‰‹æœºæ˜¾ç¤ºæ­£å¸¸ï¼‰
  mobile: {
  show: true,             // â‘  å¼ºåˆ¶åœ¨æ‰‹æœºç«¯æ˜¾ç¤ºï¼ˆé»˜è®¤å¯èƒ½éšè—ï¼Œå¿…é¡»å¼€ï¼ï¼‰ï¼›  
  scale: 0.75,            // â‘¡ ç¼©å°åˆ°75%ï¼ˆ160pxÃ—0.75=120pxï¼Œåˆšå¥½é€‚åˆæ‰‹æœºå±å¹•ï¼‰ï¼›  
  position: "fixed",      // â‘¢ æ‰‹æœºç«¯ä¹Ÿå›ºå®šåœ¨å³ä¸‹è§’ï¼›  
  right: 10,              // â‘£ æ‰‹æœºç«¯è·ç¦»å³è¾¹10pxï¼›  
  bottom: 15,             // â‘¤ æ‰‹æœºç«¯è·ç¦»åº•éƒ¨15pxï¼›  
},
};
</script>

<!-- è‡ªåŠ¨å¼¹å‡ºçš„æœ€æ–°å…¬å‘Šå¼¹çª— -->
{% if site.data.announcement.popup_enabled %}
<div id="announcement-popup" class="announcement-popup hidden"
     style="background: {{ site.data.announcement.announcements[0].background }}; color: {{ site.data.announcement.announcements[0].color }};">
  <div class="popup-content">
    <h3 class="popup-title">{{ site.data.announcement.announcements[0].title }}</h3>
    <div class="popup-text">{{ site.data.announcement.announcements[0].content | markdownify }}</div>
    <button id="close-popup" class="popup-btn"
            style="background: {{ site.data.announcement.announcements[0].button_bg }}; color: {{ site.data.announcement.announcements[0].button_color }};">
      ç¡®è®¤å¹¶å…³é—­
    </button>
  </div>
</div>
{% endif %}

<!-- å†å²å…¬å‘Šå¼¹çª— -->
<div id="announcement-history-modal" class="announcement-history-modal hidden">
  <div class="history-modal-content">
    <div class="modal-header">
      <h3>ğŸ“‹ å…¬å‘Šå†å²</h3>
      <button class="close-history-modal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="announcement-tabs">
        <button class="tab-button active" data-tab="today">ä»Šæ—¥å…¬å‘Š</button>
        <button class="tab-button" data-tab="history">å†å²å…¬å‘Š</button>
      </div>
      
      <div class="tab-content">
        <!-- ä»Šæ—¥å…¬å‘Š -->
        <div id="today-tab" class="tab-pane active">
          {% assign today_announcement = site.data.announcement.announcements | first %}
          {% if today_announcement %}
          <div class="announcement-item today">
            <h4>{{ today_announcement.title }}</h4>
            <span class="announcement-date">{{ today_announcement.date }}</span>
            <div class="announcement-content">
              {{ today_announcement.content | markdownify }}
            </div>
          </div>
          {% else %}
          <p class="no-announcement">ä»Šå¤©è¿˜æ²¡æœ‰å…¬å‘Šå–µï½à¸…(^â€¢Ï‰â€¢^)à¸…</p>
          {% endif %}
        </div>
        
        <!-- å†å²å…¬å‘Š -->
        <div id="history-tab" class="tab-pane">
          <div class="announcement-list">
            {% for announcement in site.data.announcement.announcements %}
            <div class="announcement-item {% if forloop.first %}latest{% endif %}">
              <h4>{{ announcement.title }}</h4>
              <span class="announcement-date">{{ announcement.date }}</span>
              <div class="announcement-content">
                {{ announcement.content | markdownify }}
              </div>
            </div>
            {% if forloop.last == false %}<hr>{% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', function() {
  // è‡ªåŠ¨å¼¹å‡ºå…¬å‘Šé€»è¾‘
  const popup = document.getElementById('announcement-popup');
  const closePopupBtn = document.getElementById('close-popup');
  
  if (popup && closePopupBtn) {
    // æ£€æŸ¥cookieï¼Œå¦‚æœå·²ç»å…³é—­è¿‡åˆ™ä¸æ˜¾ç¤º
    const announcementClosed = getCookie('announcement_closed');
    if (!announcementClosed) {
      setTimeout(() => {
        popup.classList.remove('hidden');
      }, 1000); // 1ç§’åæ˜¾ç¤º
    }
    
    // å…³é—­å…¬å‘Šå¼¹çª—
    closePopupBtn.addEventListener('click', function() {
      popup.classList.add('hidden');
      // è®¾ç½®cookieï¼Œ1å¤©å†…ä¸å†æ˜¾ç¤º
      setCookie('announcement_closed', 'true', 1);
    });
    
    // ç‚¹å‡»èƒŒæ™¯å…³é—­
    popup.addEventListener('click', function(e) {
      if (e.target === popup) {
        popup.classList.add('hidden');
        setCookie('announcement_closed', 'true', 1);
      }
    });
  }
  
  // å†å²å…¬å‘Šå¼¹çª—é€»è¾‘
  const toggleBtn = document.getElementById('announcement-toggle');
  const historyModal = document.getElementById('announcement-history-modal');
  const closeHistoryBtn = document.querySelector('.close-history-modal');
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabPanes = document.querySelectorAll('.tab-pane');
  
  if (toggleBtn && historyModal) {
    // æ‰“å¼€å†å²å…¬å‘Šå¼¹çª—
    toggleBtn.addEventListener('click', function() {
      historyModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    });
    
    // å…³é—­å†å²å…¬å‘Šå¼¹çª—
    if (closeHistoryBtn) {
      closeHistoryBtn.addEventListener('click', function() {
        historyModal.classList.add('hidden');
        document.body.style.overflow = 'auto';
      });
    }
    
    // ç‚¹å‡»èƒŒæ™¯å…³é—­
    historyModal.addEventListener('click', function(e) {
      if (e.target === historyModal) {
        historyModal.classList.add('hidden');
        document.body.style.overflow = 'auto';
      }
    });
    
    // ESCé”®å…³é—­
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && !historyModal.classList.contains('hidden')) {
        historyModal.classList.add('hidden');
        document.body.style.overflow = 'auto';
      }
    });
    
    // æ ‡ç­¾é¡µåˆ‡æ¢
    tabButtons.forEach(button => {
      button.addEventListener('click', function() {
        const tabName = this.getAttribute('data-tab');
        
        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        tabButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        
        // æ›´æ–°å†…å®¹æ˜¾ç¤º
        tabPanes.forEach(pane => pane.classList.remove('active'));
        document.getElementById(tabName + '-tab').classList.add('active');
      });
    });
  }
  
  // Cookieæ“ä½œå‡½æ•°
  function setCookie(name, value, days) {
    const date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    const expires = "expires=" + date.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
  }
  
  function getCookie(name) {
    const nameEQ = name + "=";
    const ca = document.cookie.split(';');
    for(let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) === ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
  }
  
  // æ—¥æœŸæ›¿æ¢é€»è¾‘ï¼ˆå¦‚æœå…¬å‘Šå†…å®¹ä¸­æœ‰Liquidæ¨¡æ¿ï¼‰
  const announcementTexts = document.querySelectorAll('.announcement-content');
  if (announcementTexts) {
    const today = new Date().toISOString().split('T')[0];
    announcementTexts.forEach(text => {
      text.innerHTML = text.innerHTML.replace(/{{ site\.time \| date: "%Y-%m-%d" }}/g, today);
    });
  }
});
</script>

<!-- åŠ è½½çœ‹æ¿å¨˜æ ¸å¿ƒè„šæœ¬ï¼ˆä¿æŒä¸å˜ï¼‰ -->
<script src="https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0-rc.6/dist/autoload.js"></script>

</body>
</html>
