<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title }} - {{ site.title }}</title>
    
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        line-height: 1.6;
        color: #2c3e50;
        background: #f9f9f9;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }

    /* é¡¶éƒ¨å¯¼èˆªæ  */
    .header {
        background: linear-gradient(135deg, #ffb6c1, #ff69b4);
        padding: 15px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .site-title {
        color: white;
        font-size: 1.2em;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .site-title::before {
        content: 'ğŸ±';
        font-size: 1.2em;
    }

    /* æ±‰å ¡èœå•æŒ‰é’® */
    .hamburger-menu {
        width: 30px;
        height: 25px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        cursor: pointer;
        z-index: 101;
    }

    .hamburger-line {
        height: 3px;
        background: white;
        border-radius: 2px;
        transition: all 0.3s ease;
    }

    .hamburger-menu.active .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .hamburger-menu.active .hamburger-line:nth-child(2) {
        opacity: 0;
    }

    .hamburger-menu.active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -6px);
    }

    /* æ–‡ç« å†…å®¹åŒºåŸŸ */
    .article-container {
        max-width: 100%;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 0;
        position: relative;
        z-index: 1;
    }

    .article-title {
        color: #ff69b4;
        font-size: 1.8em;
        text-align: center;
        margin-bottom: 10px;
        padding-bottom: 15px;
        border-bottom: 2px dashed #ffb6c1;
        line-height: 1.3;
    }

    .article-date {
        text-align: center;
        color: #87ceeb;
        margin-bottom: 20px;
        font-size: 0.9em;
    }

    .article-content h2 {
        color: #ff69b4;
        border-left: 4px solid #87ceeb;
        padding-left: 15px;
        margin: 25px 0 15px 0;
        font-size: 1.4em;
        line-height: 1.3;
        clear: both;
    }

    .article-content h3 {
        color: #ff1493;
        margin: 20px 0 10px 0;
        padding-left: 10px;
        border-bottom: 1px dashed #ffb6c1;
        font-size: 1.2em;
        line-height: 1.3;
        clear: both;
    }

    .article-content h4 {
        color: #ff1493;
        margin: 15px 0 8px 0;
        padding-left: 10px;
        font-size: 1.1em;
        line-height: 1.3;
        clear: both;
    }

    .article-content ul {
        padding-left: 20px;
        margin-bottom: 15px;
    }

    .article-content li {
        margin-bottom: 8px;
        line-height: 1.5;
    }

    .article-content p {
        margin-bottom: 15px;
        line-height: 1.5;
    }

    .tool-recommendation {
        background: #f0f8ff;
        padding: 12px;
        border-radius: 8px;
        margin: 12px 0;
        border-left: 4px solid #87ceeb;
        clear: both;
    }

    .tool-title {
        color: #ff1493;
        font-weight: bold;
        margin-bottom: 6px;
    }

    a {
        color: #87ceeb;
        text-decoration: none;
        word-break: break-all;
    }

    a:hover {
        text-decoration: underline;
        color: #ff69b4;
    }

    hr {
        border: none;
        height: 1px;
        background: linear-gradient(90deg, #ffb6c1, #87ceeb);
        margin: 20px 0;
        clear: both;
    }

    /* æ±‰å ¡èœå•ç›®å½•æ ·å¼ */
    .toc-sidebar {
        position: fixed;
        top: 0;
        right: -300px;
        width: 280px;
        height: 100vh;
        background: linear-gradient(135deg, #ffd1dc, #ffb6c1);
        z-index: 99;
        padding: 70px 20px 20px;
        transition: right 0.3s ease;
        overflow-y: auto;
        box-shadow: -5px 0 15px rgba(0,0,0,0.1);
    }

    .toc-sidebar.active {
        right: 0;
    }

    .toc-header {
        color: #ff1493;
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 15px;
        text-align: center;
        padding-bottom: 10px;
        border-bottom: 2px dashed #ff69b4;
    }

    .toc-list {
        list-style: none;
    }

    .toc-item {
        margin-bottom: 8px;
    }

    .toc-link {
        color: #666;
        text-decoration: none;
        display: block;
        padding: 10px 15px;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-size: 0.9em;
        background: rgba(255, 255, 255, 0.7);
        line-height: 1.3;
    }

    .toc-link:hover {
        background: rgba(255, 255, 255, 0.9);
        color: #ff1493;
        transform: translateX(5px);
    }

    .toc-link.active {
        background: rgba(255, 255, 255, 0.95);
        color: #ff1493;
        font-weight: bold;
    }

    /* é®ç½©å±‚ */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 98;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .overlay.active {
        opacity: 1;
        visibility: visible;
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (min-width: 768px) {
        .article-container {
            max-width: 700px;
            padding: 30px;
            border-radius: 15px;
            margin: 20px auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .article-title {
            font-size: 2.2em;
        }
        
        .toc-sidebar {
            width: 300px;
        }
    }

    /* é˜²æ­¢æ–‡å­—é‡å çš„é¢å¤–æ ·å¼ */
    .content-section {
        margin-bottom: 25px;
        overflow: hidden;
    }
    
    .text-wrapper {
        display: block;
        width: 100%;
        overflow-wrap: break-word;
    }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="header">
        <div class="site-title">æˆéœœå–µå–µã®å°çª</div>
        <div class="hamburger-menu" id="hamburgerMenu">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
        </div>
    </div>

    <!-- é®ç½©å±‚ -->
    <div class="overlay" id="overlay"></div>

    <!-- æ±‰å ¡èœå•ç›®å½• -->
    <aside class="toc-sidebar" id="tocSidebar">
        <div class="toc-header">ğŸ“‘ æ–‡ç« ç›®å½•</div>
        <ul class="toc-list" id="tocList">
            <!-- ç›®å½•å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </ul>
    </aside>

    <!-- æ–‡ç« å†…å®¹ -->
    <div class="article-container">
        <article class="article-content">
            <div class="content-section">
                <h1 class="article-title">{{ page.title }}</h1>
                <div class="article-date">{{ page.date | date: "%Yå¹´%mæœˆ%dæ—¥" }}</div>
            </div>
            
            {{ content }}
        </article>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const hamburgerMenu = document.getElementById('hamburgerMenu');
        const tocSidebar = document.getElementById('tocSidebar');
        const overlay = document.getElementById('overlay');
        const tocList = document.getElementById('tocList');
        
        // è·å–æ‰€æœ‰æ ‡é¢˜å…ƒç´ 
        const headings = document.querySelectorAll('h2, h3, h4');
        
        // ç”Ÿæˆç›®å½•
        headings.forEach((heading, index) => {
            if (!heading.id) {
                heading.id = 'heading-' + index;
            }
            
            const listItem = document.createElement('li');
            listItem.className = 'toc-item';
            
            const link = document.createElement('a');
            link.href = '#' + heading.id;
            link.className = 'toc-link';
            link.textContent = heading.textContent;
            
            // æ ¹æ®æ ‡é¢˜çº§åˆ«æ·»åŠ ç¼©è¿›
            const level = parseInt(heading.tagName.substring(1));
            if (level > 2) {
                link.style.paddingLeft = (level - 1) * 15 + 'px';
            }
            
            listItem.appendChild(link);
            tocList.appendChild(listItem);
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // å…³é—­ç›®å½•
                hamburgerMenu.classList.remove('active');
                tocSidebar.classList.remove('active');
                overlay.classList.remove('active');
                
                // æ»šåŠ¨åˆ°å¯¹åº”æ ‡é¢˜
                const targetElement = document.getElementById(heading.id);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // æ±‰å ¡èœå•ç‚¹å‡»äº‹ä»¶
        hamburgerMenu.addEventListener('click', function() {
            this.classList.toggle('active');
            tocSidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        });
        
        // é®ç½©å±‚ç‚¹å‡»äº‹ä»¶
        overlay.addEventListener('click', function() {
            hamburgerMenu.classList.remove('active');
            tocSidebar.classList.remove('active');
            this.classList.remove('active');
        });
        
        // æ¿€æ´»å½“å‰å¯è§çš„ç›®å½•é¡¹
        function setActiveTocItem() {
            const tocLinks = document.querySelectorAll('.toc-link');
            let activeIndex = -1;
            
            // æ‰¾åˆ°å½“å‰å¯è§çš„æ ‡é¢˜
            for (let i = headings.length - 1; i >= 0; i--) {
                const rect = headings[i].getBoundingClientRect();
                if (rect.top <= 100) {
                    activeIndex = i;
                    break;
                }
            }
            
            // æ›´æ–°æ¿€æ´»çŠ¶æ€
            tocLinks.forEach((link, index) => {
                if (index === activeIndex) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }
        
        // ç›‘å¬æ»šåŠ¨äº‹ä»¶
        window.addEventListener('scroll', setActiveTocItem);
        setActiveTocItem();
    });
    </script>
</body>
</html>
